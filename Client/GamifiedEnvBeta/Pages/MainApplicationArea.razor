@page "/mainapplication"
@inject NavigationManager NavigationManager
@inject IJSRuntime jsRuntime

<style>

    @@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800&display=swap');

    * {
        font-family: 'Montserrat', sans-serif;
    }


    .wrapper {
        height: 100vh;
        width: 100%;
        overflow: hidden;
    }

    .nav {
        height: 8vh;
        background-color: #fff;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 0.8rem;
        box-shadow: rgba(0, 0, 0, 0.2) 0px 12px 28px 0px, rgba(0, 0, 0, 0.1) 0px 2px 4px 0px, rgba(255, 255, 255, 0.05) 0px 0px 0px 1px inset;
    }

    .main-body {
        height: 86vh;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background-color: pink;
        overflow: hidden;
    }
  

    .form-div {
        height: 72%;
        width: 90%;
        margin: 0.4rem auto 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        overflow-y: scroll;
        padding: 0.6rem;
        background-color: green;
    }

      .form-div::-webkit-scrollbar {
            width: 12px;
        }

        .form-div::-webkit-scrollbar-track {
            background-color: #EAF2F8;
        }

        .form-div::-webkit-scrollbar-thumb {
            background-color: #95A5A6;
            border-radius: 20px;
            border: 3px solid #EAF2F8;
        }


    .div-buttons {
        height: 8%;
        width: 90%;
        max-width: 700px;
        margin: 0 auto;
        display: flex;
        justify-content: flex-start;
        align-items: flex-start;
        background-color: aqua;
    }

    .form-group-first {
        margin-top: 5%;
        width: 40%;
        margin-left: 5%;
        margin-right: 2.5%;
    }

    .form-group-others {
        width: 40%;
        margin-left: 5%;
        margin-right: 2.5%;
        margin-top: 2%;
    }

    .form-group-text-area {
        width: 70%;
        margin-left: 15%;
        margin-right: 15%;
        margin-top: 2%;
    }

    .form-control-style {
        border: 2px darkgrey solid;
        background-color: white;
    }

    .form-control-text-area {
        border: 2px darkgrey solid;
        height: 400px;
        width: 100%;
    }


    label {
        margin-top: 5px;
        color: black;
        font-size: 15px;
    }

    .form-check-div {
        width: 20px;
        height: 100%;
        margin-left: 5px;
    }

    /*FOOTER*/
    .footer-container {
        width: 100%;
        height: 6vh;
        display: flex;
        align-items: center;
        justify-content: flex-end;
    }

        .footer-container span {
            font-size: 13px;
            font-weight: bold;
            margin-right: 2rem;
        }


    /*SLIDE OUT MENU*/
    .slide-out-menu {
        position: absolute;
        right: 0;
        height: 86vh;
        width: 0px;
        background-color: #e9ecef;
        transition: all 0.5s ease-in-out;
    }

        .slide-out-menu ul li {
            list-style: none;
            margin-top: 0.4rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

            .slide-out-menu ul li:hover {
                /*transform: scale(108%);*/
                color: #30e87a;
            }

    .slider-container {
        display: none;
        margin-left: 0.2rem;
        padding: 0.2rem;
        width: inherit;
        height: inherit;
    }

    .cloak {
        background-color: rgba(0, 0, 0, 0.8);
        position: absolute;
        width: 0px;
        height: 86vh;
        transition: width 0.7s ease-in-out;
    }

    .burger {
        cursor: pointer;
    }


    .scrollable-container {
        width: 100%;
        height: 100%;
    }

    /*ANIMATED PROGRESS BAR*/
    .progress-div
    {
        height: 10%;
        width: 90%;
        margin: 0 auto;
        background-color: blue;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .progress-icons
    {
        width: 80%;
        max-width: 750px;
        height: 80%;
        max-height: 38px;
        margin: auto;
        background-color: orangered;
    }

    .progressbar-container
    {
        width: 80%;
        max-width: 700px;
        height: 15%;
        max-height: 10px;
        margin: auto;
        background-color: #ddd;
        border-radius: 20px;
    }

    .progressbar-progress
    {
        width: 0%;
        height: 100%;
        border-radius: 20px;
        transition: width 0.5s ease-out;
        background-color: aquamarine;
    }

</style>

<div class="wrapper">

    <div class="nav">

        <div class="nav-title"><h4>Xebec Platform</h4></div>

        <div class="nav-icons">

            @* <img src="\img\user.png" alt="user"> *@
            <img class="burger" id="burger" src="\img\menu-icon.png" alt="menu" @onclick="ShowMenu">

        </div>

    </div>

    <!--A progress bar at 25%-->
    @* <div class="progress">
            <div class="progress-bar progress-bar-striped bg-danger progress-bar-animated" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
        </div> *@

    <div class="cloak" id="cloak"></div>

    <div class="slide-out-menu" id="slide-out-menu">

        <div class="slider-container" id="slider-container">

            <img src="\img\userLarge.png" alt="">

            <ul>

                <li>Home</li>
                <li>Profile</li>
                <li>Job Board</li>
                <li>Analytics Dashboad</li>
                <li>Logout</li>

            </ul>

        </div>

    </div>

    <div class="main-body">

        <div class="progress-div">

                <div class="progress-icons"></div>

                <div class="progressbar-container">
                   
                    <div class="progressbar-progress" id="progress">

                    </div>

                </div>

            @* <div class="progress-img">
                    <i class="fa fa-user-circle material-color"></i>
                </div>

                <div class="progress-img">
                    <i class="fa fa-graduation-cap material-none"></i>
                </div>


                <div class="progress-img">
                    <i class="fa fa-briefcase material-none"></i>
                </div>


                <div class="progress-img">
                    <i class="fa fa-laptop material-none"></i>
                </div> *@

        </div>

        <div class="form-div">

            <div class="scrollable-container">

                @if (Count == 1)
                {
                    <center><h4 class="mt-2 mb-3">Personal Details</h4></center>
                    <PersonalDetailsComponent />
                }
                else if (Count == 2)
                {
                    <center><h4 class="mt-2 mb-3">Education History</h4></center>
                    <EducationDetailsComponent />
                }
                else if (Count == 3)
                {
                    <center><h4 class="mt-2 mb-3">Employment History</h4></center>
                    <WorkHistoryComponent />
                }
                else if(Count == 4)
                {
                    <center><h4 class="mt-2 mb-3">Additional Information</h4></center>
                    <AdditionalInfoComponent/>
                }


            </div>

        </div>

        <form class="div-buttons">

            <button type="button" class="btn btn-outline-primary btn-sm mr-1" @onclick="PageDown">Prev</button>
            <button type="button" class="btn btn-outline-success btn-sm ml-1" id="next" @onclick="PageUp">Next</button>
            @* <button type="button" class="btn btn-outline-success btn-sm ml-1" @onclick="Up">Up</button> *@
            @* <button type="button" class="btn btn-outline-primary btn-sm ml-1" @onclick="Down">Down</button> *@

        </form>


    </div>

    <div class="footer-container">

        <span>Nebula 2021 &reg;</span>

    </div>

</div>

<!--The javascript or jquery that's being invoked is in wwwroot in the js folder called "PersonalDetailsP3.js"'-->
@code{


    int Count = 1;
    int Progress = 0;

    private async Task PageUp()
    {
        Count++;
        if (Count > 4)
            Count = 4;
        else
            Progress += 25;

        await jsRuntime.InvokeVoidAsync("toggleProgress", Progress);

    }

    private async Task PageDown()
    {
        Count--;
        if (Count < 1)
            Count = 1;
        else    
            Progress -= 25;

        await jsRuntime.InvokeVoidAsync("toggleProgress", Progress); 

    }

    protected override async void OnAfterRender(bool firstRender)
    {
        await jsRuntime.InvokeVoidAsync("personalDetails");
        await jsRuntime.InvokeVoidAsync("initializeVariables");
        await jsRuntime.InvokeVoidAsync("initializeProgress");
        base.OnAfterRender(firstRender);
    }

    private async Task ShowMenu()
    {
        await jsRuntime.InvokeVoidAsync("toggleMenu");
    }

    @* private async Task Up()
    {
        await jsRuntime.InvokeVoidAsync("test", 25);
    } *@

    @* private async Task Down()
    {

    } *@


}